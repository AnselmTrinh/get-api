<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <title>Document</title>
  </head>
  <body>
    <button type="button" onclick="read()">Lire l'adresse !</button>
    <div id="reader" style="margin-top: 15px"></div>
    <div id="error" style="margin-top: 15px"></div>
    <div class="row">
      <div class="col-lg-12">
        <table class="table" id="authors-tbl">
          <thead>
            <tr>
              <th id="id">ID <br /></th>
              <th id="name">Name <br /></th>
              <th id="email">Email <br /></th>
              <th id="lastname">Last name <br /></th>
              <th id="firstname">First name <br /></th>
            </tr>
          </thead>
          <tbody>
            <script>
              function show() {
                document.getElementById("js.script").removeAttribute("style");
                document
                  .getElementById("code")
                  .setAttribute("style", "display: none");
              }
              function read() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                  if (xhttp.readyState === 4) {
                    console.log(this.responseText);
                    var content = JSON.parse(this.responseText);
                    id = content[0].id;
                    login = content[0].login;
                    email = content[0].email;
                    lastname = content[0].lastname;
                    firstname = content[0].firstname;

                    for (let i = 0; i < content.length; i++) {
                      var newList = content[i];
                      document.getElementById("id").innerHTML +=
                        newList.id + "<br>";
                      document.getElementById("name").innerHTML +=
                        newList.login + "<br>";
                      document.getElementById("email").innerHTML +=
                        newList.email + "<br>";
                      document.getElementById("lastname").innerHTML +=
                        newList.lastname + "<br>";
                      document.getElementById("firstname").innerHTML +=
                        newList.firstname + "<br>";
                    }
                  }
                };
                xhttp.open(
                  "GET",
                  "https:/tst.quantiq.nc/devweb-cfa/api/index.php?service=user&action=list",
                  true
                );
                xhttp.send();
              }
            </script>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
